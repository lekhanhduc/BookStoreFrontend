<div class="home-page">

    <div class="row justify-content-center mb-4" *ngIf="loading">
        <div class="col-12 col-md-8 text-center">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    </div>
   
    <!-- Hiện thị danh sách Book -->
  <!-- Danh sách sách -->
<div class="container my-5" *ngIf="!loading && books.totalElements > 0">
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
      <div class="col" *ngFor="let book of books.data">
        <div
          class="card h-100 border-0 shadow-sm book-item animate__animated animate__fadeIn"
          (click)="viewBookDetail(book.bookId)"
        >
          <div class="position-relative book-cover-wrapper">
            <img
              [src]="book.bookCover"
              class="card-img-top book-cover-home img-fluid"
              [alt]="book.title + ' Cover'"
            />
            <div class="book-badge-language position-absolute top-0 end-0 m-2">
              <span class="badge bg-success rounded-pill px-2 py-1">{{ book.language }}</span>
            </div>
          </div>
          <div class="card-body d-flex flex-column p-3">
            <h3
              class="card-title book-item-title fs-5 fw-bold mb-2 text-dark"
            >
              {{ book.title }}
            </h3>
            <p
              class="book-description text-muted mb-3 fs-6 flex-grow-1"
            >
              {{ book.description | slice:0:80 }}...
            </p>
            <button class="btn btn-primary book-item-purchase">
                {{ book.price | number:'1.0-0' }} VNĐ
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

    <!-- Hiển thị khi không có sách -->
    <div *ngIf="!loading && books.totalElements === 0" class="text-center mt-4">
        <p class="text-secondary">No books</p>
    </div>

    <div class="row justify-content-center mt-4" *ngIf="books.totalPages > 0">
        <div class="col-auto">
            <nav>
                <ul class="pagination">
                    <!-- Nút Previous -->
                    <li class="page-item" [class.disabled]="books.currentPage === 1">
                        <button class="page-link" (click)="onPreviousPage()">Previous</button>
                    </li>

                    <!-- Danh sách các số trang -->
                    <li class="page-item" [class.active]="page === books.currentPage" *ngFor="let page of pages">
                        <button class="page-link" (click)="fetchBooks(page)">
                            {{ page }}
                        </button>
                    </li>

                    <!-- Nút Next -->
                    <li class="page-item" [class.disabled]="books.currentPage === books.totalPages">
                        <button class="page-link" (click)="onNextPage()">Next</button>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
     
    <div class="smoke-and-heart">
        <div class="container-fluid">
            <!-- Author Section -->
            <div class="row align-items-center mb-5">
                <!-- Author Content -->
                <div class="author-content col-md-6 order-md-1">
                    <h1 class="author-title">{{ 'HOME.SMOKE-HEART-TITLE' | translate }}</h1>
                    <p class="author-description">{{ 'HOME.SMOKE-HEART-DESCRIPTION' | translate }}</p>
                    <button class="btn-read-more">{{ 'HOME.BUY-COMPLETE-SERIES' | translate }}</button>
                </div>      

                <!-- Book Covers Section -->
                <div class="book-covers col-md-6 order-md-2">
                    <div class="row">
                        <div class="book-cover col-6 mb-4">
                            <img src="../../assets/imgs/book-cover1.png" alt="Book Cover 1">
                        </div>
                        <div class="book-cover col-6 mb-4">
                            <img src="../../assets/imgs/book-cover2.png" alt="Book Cover 2">
                        </div>
                        <div class="book-cover col-6">
                            <img src="../../assets/imgs/book-cover3.png" alt="Book Cover 3">
                        </div>
                        <div class="book-cover col-6">
                            <img src="../../assets/imgs/book-cover4.png" alt="Book Cover 4">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="reader-reviews py-5">
        <div class="container wrapper-review">
            <div class="row">
                <!-- Title and Subtitle Section -->
                <div class="col-md-4">
                    <div class="section-title-wrapper">
                        <h2 class="section-title">{{ 'HOME.READER-REVIEWS-TITLE' | translate }}</h2>
                        <p class="section-subtitle">{{ 'HOME.READER-REVIEWS-SUBTITLE' | translate }}</p>
                        <button class="btn-read-all">{{ 'HOME.READ-ALL' | translate }}</button>
                    </div>
                </div>

                <!-- Reviews Section -->
                <div class="col-md-8">
                    <div class="row">
                        <!-- Review 1 -->
                        <div class="col-md-6 mb-4">
                            <div class="review-card">
                                <p class="review-text">{{ 'REVIEW.TEXT1' | translate }}</p>
                                <div class="review-author d-flex align-items-center">
                                    <img src="../../assets/imgs/avatar.jpg" alt="{{ 'REVIEW.AUTHOR1' | translate }}"
                                        class="author-image">
                                    <div class="author-details">
                                        <h5 class="author-name">{{ 'REVIEW.AUTHOR1' | translate }}</h5>
                                        <p class="author-role">{{ 'REVIEW.ROLE1' | translate }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Review 2 -->
                        <div class="col-md-6 mb-4">
                            <div class="review-card">
                                <p class="review-text">{{ 'REVIEW.TEXT2' | translate }}</p>
                                <div class="review-author d-flex align-items-center">
                                    <img src="../../assets/imgs/avatar.jpg" alt="{{ 'REVIEW.AUTHOR2' | translate }}"
                                        class="author-image">
                                    <div class="author-details">
                                        <h5 class="author-name">{{ 'REVIEW.AUTHOR2' | translate }}</h5>
                                        <p class="author-role">{{ 'REVIEW.ROLE2' | translate }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Review 3 -->
                        <div class="col-md-6 mb-4">
                            <div class="review-card">
                                <p class="review-text">{{ 'REVIEW.TEXT3' | translate }}</p>
                                <div class="review-author d-flex align-items-center">
                                    <img src="../../assets/imgs/avatar.jpg" alt="{{ 'REVIEW.AUTHOR3' | translate }}"
                                        class="author-image">
                                    <div class="author-details">
                                        <h5 class="author-name">{{ 'REVIEW.AUTHOR3' | translate }}</h5>
                                        <p class="author-role">{{ 'REVIEW.ROLE3' | translate }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Review 4 -->
                        <div class="col-md-6 mb-4">
                            <div class="review-card">
                                <p class="review-text">{{ 'REVIEW.TEXT4' | translate }}</p>
                                <div class="review-author d-flex align-items-center">
                                    <img src="../../assets/imgs/avatar.jpg" alt="{{ 'REVIEW.AUTHOR4' | translate }}"
                                        class="author-image">
                                    <div class="author-details">
                                        <h5 class="author-name">{{ 'REVIEW.AUTHOR4' | translate }}</h5>
                                        <p class="author-role">{{ 'REVIEW.ROLE4' | translate }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="upcoming-book-section py-5">
        <div class="container">
            <div class="row align-items-center">
                <!-- Book Cover -->
                <div class="col-md-6">
                    <img src="https://danielk.tech/user/pages/01.home/best-angular-books/ng-book-cover-ngb-ng-550.png"
                        alt="{{ 'HOME.UPCOMING-BOOK-TITLE' | translate }}" class="book-cover-upcoming" />
                </div>
                <!-- Book Content -->
                <div class="col-md-6">
                    <h2 class="upcoming-title">{{ 'HOME.UPCOMING-BOOK-TITLE' | translate }}</h2>
                    <p class="upcoming-description">{{ 'HOME.UPCOMING-BOOK-DESCRIPTION' | translate }}</p>
                    <button class="btn-notify-me">{{ 'HOME.NOTIFY-ME' | translate }}</button>
                </div>
            </div>
        </div>
    </div>

    <div class="subscribe-section py-5">
        <div class="container">
            <div class="row align-items-center">
                <!-- Subscription Form -->
                <div class="col-md-6">
                    <h2 class="subscribe-title">{{ 'HOME.SUBSCRIBE-TITLE' | translate }}</h2>
                    <form class="subscribe-form d-flex">
                        <input type="email" class="form-control"
                            placeholder="{{ 'HOME.SUBSCRIBE-EMAIL-PLACEHOLDER' | translate }}"
                            [attr.aria-label]="'HOME.SUBSCRIBE-EMAIL-PLACEHOLDER' | translate" required />
                        <button type="submit" class="btn-subscribe">{{ 'HOME.SUBSCRIBE-BUTTON' | translate }}</button>
                    </form>
                </div>
                <!-- Book Images -->
                <div class="col-md-6 d-flex justify-content-center position-relative">
                    <img src="../../assets/imgs/book-cover1.png" alt="Book Cover 1"
                        class="book-cover-notification book-cover-left" />
                    <img src="../../assets/imgs/book-cover2.png" alt="Book Cover 2"
                        class="book-cover-notification book-cover-right" />
                </div>
            </div>
        </div>
    </div>
</div>